{% extends 'base.html' %}

{% block title %}{% if review %}Edit Review{% else %}Add Review{% endif %} - Poet's Canvas{% endblock %}

{% block content %}
<div class="mb-3">
    <a href="{% url 'book_detail' book.id %}" class="btn btn-secondary btn-custom">
        <i class="bi bi-arrow-left"></i> Back to Book
    </a>
</div>

<h1><i class="bi bi-{% if review %}pencil{% else %}star{% endif %}"></i> {% if review %}Edit Review{% else %}Add Review{% endif %} for "{{ book.title }}"</h1>

<form method="post" class="mt-4">
    {% csrf_token %}
    
    <div class="mb-4">
        <label for="reviewer_name" class="form-label">Your Name *</label>
        <input type="text" id="reviewer_name" name="reviewer_name" class="form-control" value="{{ review.reviewer_name|default:'' }}" required>
    </div>
    
    <div class="mb-4">
        <label for="rating" class="form-label">Rating * (1-5 stars)</label>
        <input type="number" id="rating" name="rating" class="form-control" min="1" max="5" value="{{ review.rating|default:5 }}" required>
        <small class="form-text text-muted">Rate this book from 1 (poor) to 5 (excellent)</small>
    </div>
    
    <div class="mb-4">
        <label for="body" class="form-label">Review Text *</label>
        <textarea id="body" name="body" class="form-control" rows="6" required>{{ review.body|default:'' }}</textarea>
    </div>
    
    <div class="d-flex gap-3">
        <button type="submit" class="btn btn-success btn-custom">
            <i class="bi bi-{% if review %}check-circle{% else %}star-fill{% endif %}"></i> 
            {% if review %}Update Review{% else %}Submit Review{% endif %}
        </button>
        <a href="{% url 'book_detail' book.id %}" class="btn btn-secondary btn-custom">
            <i class="bi bi-x-circle"></i> Cancel
        </a>
    </div>
</form>
{% endblock %}

